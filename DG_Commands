dgmgrl
connect sys/pw@GGAQ_DGMGRL


CREATE CONFIGURATION 'GGAQ_DG' AS PRIMARY DATABASE IS 'GGAQ' CONNECT IDENTIFIER IS 'GGAQ_DGMGRL';
ADD DATABASE 'GGAQDG' AS CONNECT IDENTIFIER IS 'GGAQDG_DGMGRL';
ENABLE CONFIGURATION;
--enable database GGAQDG;
EDIT DATABASE GGAQ SET PROPERTY TransportDisconnectedThreshold='60';
EDIT DATABASE GGAQDG SET PROPERTY TransportDisconnectedThreshold='60';
EDIT CONFIGURATION SET PROPERTY OperationTimeout=600;
EDIT DATABASE GGAQDG SET PROPERTY TransportLagThreshold='60';
EDIT DATABASE GGAQDG SET PROPERTY ApplyLagThreshold='60';

--optional commands
SHOW CONFIGURATION
SHOW DATABASE GGAQDG LOGXPTSTATUS
SHOW DATABASE GGAQDG STATUSREPORT
SHOW DATABASE GGAQDG INCONSISTENTPROPERTIES
SHOW DATABASE VERBOSE GGAQDG
SHOW DATABASE VERBOSE GGAQ
SHOW DATABASE GGAQDG
SHOW DATABASE GGAQ
SHOW CONFIGURATION VERBOSE;

VALIDATE DATABASE VERBOSE GGAQDG

EDIT DATABASE 'GGAQDG' SET STATE='APPLY-OFF';
EDIT DATABASE 'GGAQDG' SET STATE='APPLY-ON';


--Open database read only with apply
SQL> ALTER DATABASE RECOVER MANAGED STANDBY DATABASE CANCEL;
SQL> ALTER DATABASE OPEN;
SQL> ALTER DATABASE RECOVER MANAGED STANDBY DATABASE DISCONNECT;

--Configure RMAN for log apply
CONFIGURE ARCHIVELOG DELETION POLICY TO APPLIED ON ALL STANDBY;
